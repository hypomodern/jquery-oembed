(function(c){c.fn.oembed=function(f,e,g){e=c.extend(true,c.fn.oembed.defaults,e);return this.each(function(){var h=c(this),i=(f!=null)?f:h.attr("href"),j;if(!g){g=function(l,k){c.fn.oembed.insertCode(l,e.embedMethod,k)}}if(i!=null){j=d(i);if(j!=null){j.maxWidth=e.maxWidth;j.maxHeight=e.maxHeight;j.params=e[j.name]||{};j.embedCode(h,i,g);return}}g(h,null)})};c.fn.oembed.defaults={maxWidth:null,maxHeight:null,embedMethod:"replace"};c.fn.oembed.insertCode=function(f,g,e){switch(g){case"auto":if(f.attr("href")!=null){insertCode(f,"append",e)}else{insertCode(f,"replace",e)}break;case"replace":f.replaceWith(e.code);break;case"fill":f.html(e.code);break;case"append":var h=f.next();if(h==null||!h.hasClass("oembed-container")){h=f.after('<div class="oembed-container"></div>').next(".oembed-container");if(e!=null&&e.provider_name!=null){h.toggleClass("oembed-container-"+e.provider_name)}}h.html(e.code);break}};c.fn.oembed.getPhotoCode=function(e,g){var h=g.title?g.title:"";h+=g.author_name?" - "+g.author_name:"";h+=g.provider_name?" - "+g.provider_name:"";var f='<div><a href="'+e+'" target="_blank"><img src="'+g.url+'" alt="'+h+'"/></a></div>';if(g.html){f+="<div>"+g.html+"</div>"}return f};c.fn.oembed.getVideoCode=function(e,g){var f=g.html;return f};c.fn.oembed.getRichCode=function(e,g){var f=g.html;return f};c.fn.oembed.getGenericCode=function(e,g){var h=(g.title!=null)?g.title:e,f='<a href="'+e+'">'+h+"</a>";if(g.html){f+="<div>"+g.html+"</div>"}return f};c.fn.oembed.isAvailable=function(e){var f=d(e);return(f!=null)};function d(e){for(var f=0;f<b.length;f++){if(b[f].matches(e)){return b[f]}}return null}var b=[new a("fivemin","5min.com"),new a("amazon","amazon.com"),new a("flickr","flickr","http://flickr.com/services/oembed","jsoncallback"),new a("googlevideo","video.google."),new a("hulu","hulu.com"),new a("imdb","imdb.com"),new a("metacafe","metacafe.com"),new a("qik","qik.com"),new a("revision3","slideshare"),new a("slideshare","5min.com"),new a("twitpic","twitpic.com"),new a("viddler","viddler.com"),new a("vimeo","vimeo.com","http://vimeo.com/api/oembed.json"),new a("wikipedia","wikipedia.org"),new a("wordpress","wordpress.com"),new a("youtube","youtube.com")];function a(e,f,h,g){this.name=e;this.urlPattern=f;this.oEmbedUrl=(h!=null)?h:"http://oohembed.com/oohembed/";this.callbackparameter=(g!=null)?g:"callback";this.maxWidth=500;this.maxHeight=400;this.matches=function(i){return i.indexOf(this.urlPattern)>=0};this.getRequestUrl=function(m){var k=this.oEmbedUrl;if(k.indexOf("?")<=0){k=k+"?"}var j="";for(var l in this.params){if(l==this.callbackparameter){continue}if(this.params[l]!=null){j+="&"+escape(l)+"="+this.params[l]}}k+="format=json";if(this.maxWidth!=null){k+="&maxwidth="+this.maxWidth}if(this.maxHeight!=null){k+="&maxheight="+this.maxHeight}k+="&url="+escape(m)+j+"&"+this.callbackparameter+"=?";return k};this.embedCode=function(i,k,l){var j=this.getRequestUrl(k);c.getJSON(j,function(p){var m=c.extend(p);var o,n=p.type;switch(n){case"photo":m.code=c.fn.oembed.getPhotoCode(k,p);break;case"video":m.code=c.fn.oembed.getVideoCode(k,p);break;case"rich":m.code=c.fn.oembed.getRichCode(k,p);break;default:m.code=c.fn.oembed.getGenericCode(k,p);break}l(i,m)})}}})(jQuery);