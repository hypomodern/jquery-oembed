(function(c){c.fn.oembed=function(f,e,g){e=c.extend({},c.fn.oembed.defaults,e);return this.each(function(){var h=c(this);var i=(f!=null)?f:h.attr("href");var j;if(!g){g=function(k){var l=h;if(h.attr("href")!=null){l=h.next();if(l==null||!l.hasClass("oembed-container")){h.after('<div class="oembed-container"></div>').next(".oembed-container")}}l.html(k.code)}}if(i!=null){j=d(i);if(j!=null){j.maxWidth=e.maxWidth;j.maxHeight=e.maxHeight;j.embedCode(i,g);return}}g(null)})};c.fn.oembed.defaults={maxWidth:500,maxHeight:400};c.fn.oembed.getPhotoCode=function(e,g){var f='<div><a href="'+e+'" target="_blank"><img src="'+g.url+'"/></a></div>';if(g.html){f+="<div>"+g.html+"</div>"}return f};c.fn.oembed.getVideoCode=function(e,g){var f=g.html;return f};c.fn.oembed.getRichCode=function(e,g){var f=g.html;return f};c.fn.oembed.getGenericCode=function(e,g){var h=(g.title!=null)?g.title:e,f='<a href="'+e+'">'+h+"</a>";if(g.html){f+="<div>"+g.html+"</div>"}return f};c.fn.oembed.isAvailable=function(e){var f=d(e);return(f!=null)};function d(e){for(var f=0;f<b.length;f++){if(b[f].matches(e)){return b[f]}}return null}var b=[new a("fivemin","5min.com"),new a("amazon","amazon.com"),new a("flickr","flickr","http://flickr.com/services/oembed","jsoncallback"),new a("googlevideo","video.google."),new a("hulu","hulu.com"),new a("imdb","imdb.com"),new a("metacafe","metacafe.com"),new a("qik","qik.com"),new a("revision3","slideshare"),new a("slideshare","5min.com"),new a("twitpic","twitpic.com"),new a("viddler","viddler.com"),new a("vimeo","vimeo.com","http://vimeo.com/api/oembed.json"),new a("wikipedia","wikipedia.org"),new a("wordpress","wordpress.com"),new a("youtube","youtube.com")];function a(e,f,h,g){this.name=e;this.urlPattern=f;this.oEmbedUrl=(h!=null)?h:"http://oohembed.com/oohembed/";this.callbackparameter=(g!=null)?g:"callback";this.maxWidth=500;this.maxHeight=400;this.matches=function(i){return i.indexOf(this.urlPattern)>=0};this.getRequestUrl=function(j){var i=this.oEmbedUrl;if(i.indexOf("?")<=0){i=i+"?"}i+="maxwidth="+this.maxWidth+"&maxHeight="+this.maxHeight+"&format=json&url="+escape(j)+"&"+this.callbackparameter+"=?";return i};this.embedCode=function(k,j){var i=this.getRequestUrl(k);c.getJSON(i,function(o){var l=c.extend(o);var n,m=o.type;switch(m){case"photo":l.code=c.fn.oembed.getPhotoCode(k,o);break;case"video":l.code=c.fn.oembed.getVideoCode(k,o);break;case"rich":l.code=c.fn.oembed.getRichCode(k,o);break;default:l.code=c.fn.oembed.getGenericCode(k,o);break}j(l)})}}})(jQuery);